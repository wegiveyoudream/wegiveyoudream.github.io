(this["webpackJsonpwp-tester"]=this["webpackJsonpwp-tester"]||[]).push([[0],{175:function(e,t,a){},176:function(e,t,a){},247:function(e,t,a){},253:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(35),s=a.n(c),r=a(26),i=a(129),o=a(27),l=a(8);var u,d,j=function(){return Object(l.jsx)("span",{children:"EditProfile"})},b=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("span",{children:"Profile"})})},f=a(85),p=a(261),m=a(158),h=a(257),O=a(93),g=a(45),x=a(130),v=(a(169),a(254),a(171),[{apiKey:"AIzaSyAzxCzTSK9f2j_pTvtBkg_VLnqpOWyNonU",authDomain:"checksystem-193c7.firebaseapp.com",databaseURL:"https://checksystem-193c7-default-rtdb.firebaseio.com",projectId:"checksystem-193c7",storageBucket:"checksystem-193c7.appspot.com",messagingSenderId:"300844364368",appId:"1:300844364368:web:58a8f1c3f3644a00b05755",measurementId:"G-90GHWMYCHQ"},{apiKey:"AIzaSyBczcCqGDOlJ_Kv7goXpRiBuFlkqq_aU0M",authDomain:"wptester2018.firebaseapp.com",databaseURL:"https://wptester2018-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"wptester2018",storageBucket:"wptester2018.appspot.com",messagingSenderId:"603819967345",appId:"1:603819967345:web:94551dd02a9a37ffceecd0"}]),I=x.a.initializeApp({apiKey:"AIzaSyAzxCzTSK9f2j_pTvtBkg_VLnqpOWyNonU",authDomain:"checksystem-193c7.firebaseapp.com",databaseURL:"https://checksystem-193c7-default-rtdb.firebaseio.com",projectId:"checksystem-193c7",storageBucket:"checksystem-193c7.appspot.com",messagingSenderId:"300844364368",appId:"1:300844364368:web:58a8f1c3f3644a00b05755",measurementId:"G-90GHWMYCHQ"}),S=I.database(),y=I.storage(),N=I.auth(),k=(u=0,d=v.length-1,Math.floor(Math.random()*(d-u+1))+u);console.log("index",k);var w=v[k],C=x.a.initializeApp(w,w.apiKey),U=C.database(),F=C.storage(),L=a(102),W=a.n(L),A=function(e){var t=e.options,a=e.defaultValue,n=e.onChange,c=e.className;return Object(l.jsx)(O.a,{className:c,placeholder:"Choose series",onChange:n,defaultValue:a,options:t})},D=(a(175),function(){var e=Object(n.useState)("WpFile/".concat("41","/User/")),t=Object(r.a)(e,1)[0],a=Object(n.useState)(null),c=Object(r.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)("41"),u=Object(r.a)(o,2),d=u[0],j=u[1],b=Object(n.useState)([]),x=Object(r.a)(b,2),v=x[0],I=x[1],y=Object(n.useState)(""),k=Object(r.a)(y,2),w=k[0],C=k[1],L=Object(n.useState)([]),D=Object(r.a)(L,2),T=D[0],E=D[1],_=Object(n.useState)(""),P=Object(r.a)(_,2),H=P[0],z=P[1],G={beforeUpload:function(e){return e.name.endsWith(".hwp")?w?(i(null),!0):(m.b.error("Please choose standard file!"),h.a.LIST_IGNORE):(m.b.error("".concat(e.name," is not HWP file.")),h.a.LIST_IGNORE)},onChange:function(e){var t=e.fileList.length?e.fileList[0].originFileObj:null;i(t)}},R=function(e){var a=F.ref(t+N.currentUser.uid+"_"+e.name).put(e);console.log("Uploading..."),z("Uploading..."),a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(t+"% done")}),(function(e){console.log(e),console.log(e.message),z(e.message)}),(function(){F.ref(t).child(N.currentUser.uid+"_"+e.name).getDownloadURL().then((function(t){console.log("Checking..."),z("Checking...");var a=U.ref().push().key;Y(N.currentUser.uid,a,w,t,N.currentUser.uid+"_"+e.name,"")}))}))},Y=function(e,t,a,n,c,s){U.ref("WpDb/".concat(d,"/ListPending/")+e+"/"+t).set({FileDestName:a,FileSrc:n,FileSrcName:c,InsertTime:W()().format("YYYY-MM-DD HH:mm:ss"),HtmlResult:s})};return Object(n.useEffect)((function(){var e=U.ref("WpDb/".concat(d,"/ListCompleted/")+N.currentUser.uid);e.on("value",(function(t){var a=t.val();if(null!=a){var n=Object.values(a);console.log("Completed."),z(n[0].HtmlResult),e.remove()}})),S.ref("WpDb/".concat(d,"/Standard")).on("value",(function(e){var t=e.val();if(null!=t){var a=Object.values(t).map((function(e){return{value:e.FileName,label:e.FileName}}));E(a),C(a.length?a[0].value:"")}}))}),[d]),Object(n.useEffect)((function(){S.ref("WpDb/Series").on("value",(function(e){var t=e.val();if(null!=t){var a=Object.entries(t).reverse().map((function(e){return{value:e[0],label:e[1]}}));I(a)}}))}),[]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"upload-file",children:[Object(l.jsxs)("div",{className:"upload-area",children:[Object(l.jsx)(A,{className:"select-series",options:v,defaultValue:"41",onChange:function(e){j(e)}}),Object(l.jsx)(O.a,{showSearch:!0,className:"select-standard",placeholder:"Choose standard file",value:w,options:T,onChange:function(e){C(e)}}),Object(l.jsx)(h.a,Object(f.a)(Object(f.a)({className:"select"},G),{},{maxCount:1,children:Object(l.jsx)(g.a,{icon:Object(l.jsx)(p.a,{}),children:"Select HWP"})})),Object(l.jsx)(g.a,{disabled:!s,className:"upload",onClick:function(){R(s)},children:"Upload"})]}),Object(l.jsx)("div",{className:"html-result",dangerouslySetInnerHTML:{__html:H}})]})})}),T=a(95),E=a.n(T),_=a(132),P=a(262),H=a(263),z=a(264),G=a(265),R=a(258),Y=a(259),B=(a(138),a(176),function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(r.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(!0),j=Object(r.a)(d,2),b=j[0],f=j[1],p=Object(n.useState)(""),m=Object(r.a)(p,2),h=m[0],O=m[1],x=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?c(n):"password"===a&&u(n)},v=function(){var e=Object(_.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b){e.next=7;break}return e.next=4,N.signInWithEmailAndPassword(a,o);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,N.createUserWithEmailAndPassword(a,o);case 9:n=e.sent;case 10:console.log(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(_.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t?a=new I.auth.GoogleAuthProvider:"github"===t&&(a=new I.auth.GithubAuthProvider),e.next=3,N.signInWithPopup(a);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"login-form",children:[Object(l.jsxs)(R.a,{onFinish:v,children:[Object(l.jsx)(R.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(l.jsx)(Y.a,{name:"email",prefix:Object(l.jsx)(P.a,{className:"site-form-item-icon"}),placeholder:"Email",value:a,onChange:x})}),Object(l.jsx)(R.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(l.jsx)(Y.a,{name:"password",prefix:Object(l.jsx)(H.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password",value:o,onChange:x})}),Object(l.jsxs)(R.a.Item,{children:[Object(l.jsx)(g.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:!1===b?"Create new account":"Log In"}),Object(l.jsx)(g.a,{onClick:function(){return f((function(e){return!e}))},className:"sign-up-link",children:b?"Sign up here":"Sign in here"})]})]}),Object(l.jsx)("span",{className:"text-error",children:h}),Object(l.jsx)("span",{children:"Or sign in with"}),Object(l.jsxs)("div",{className:"login-social",children:[Object(l.jsx)(g.a,{icon:Object(l.jsx)(z.a,{}),name:"google",onClick:function(){return S("google")},type:"primary",danger:!0,children:"Google"}),Object(l.jsx)(g.a,{icon:Object(l.jsx)(G.a,{}),name:"github",onClick:function(){return S("github")},children:"Github"})]})]})}),M=a(73),K=function(){var e=Object(o.f)(),t=function(){N.signOut().then((function(){e.push("/")})).catch((function(e){console.log(e)}))},a=Object(n.useState)(!1),c=Object(r.a)(a,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){S.ref("WpDb/UserRole").on("value",(function(e){var t=e.val();null!=t&&Object.values(t).forEach((function(e,t){N.currentUser.email===e&&i(!0)}))}))}),[]),Object(l.jsxs)(M.a,{onClick:function(a){"/logout"===a.key?t():e.push(a.key)},defaultSelectedKeys:["/"],mode:"inline",children:[Object(l.jsx)(M.a.Item,{children:"Upload File"},"/uploadfile"),s?Object(l.jsx)(M.a.Item,{children:"Upload File Standard"},"/uploadfilestandard"):null,Object(l.jsx)(M.a.Item,{children:Object(l.jsx)(g.a,{type:"primary",block:!0,children:"Logout"})},"/logout")]})},q=a(260),V=a(256),J=(a(247),O.a.Option,function(){var e=Object(n.useState)("41"),t=Object(r.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),i=Object(r.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(null),j=Object(r.a)(d,2),b=j[0],O=j[1],x=Object(n.useState)(""),v=Object(r.a)(x,2),N=v[0],k=v[1],w=Object(n.useState)(),C=Object(r.a)(w,2),U=C[0],F=C[1],L={beforeUpload:function(e){return e.name.includes(".hwp")||m.b.error("".concat(e.name," is not a hwp file")),!!e.name.includes(".hwp")||h.a.LIST_IGNORE},onChange:function(e){console.log("info",e);var t=e.fileList[0].originFileObj;O(t)}},D=function(e,t,n,c){I.database().ref("WpDb/".concat(a,"/Standard/")+e).set({FileSrc:t,FileName:n,InsertTime:W()().format("YYYY-MM-DD HH:mm:ss"),IsActive:c})};Object(n.useEffect)((function(){S.ref("WpDb/Series").on("value",(function(e){var t=e.val();if(null!=t){var a=Object.entries(t).reverse().map((function(e){return{value:e[0],label:e[1]}}));u(a)}}))}),[]),Object(n.useEffect)((function(){S.ref("WpDb/".concat(a,"/Standard")).on("value",(function(e){var t=e.val();F(t?Object.values(t):[])}))}),[a]);var T=[{title:"FileName",dataIndex:"FileName",key:"FileName",render:function(e,t){return Object(l.jsx)("span",{children:t.FileName})}},{title:"InsertTime",dataIndex:"InsertTime",key:"InsertTime",render:function(e,t){return Object(l.jsx)("span",{children:t.InsertTime})}},{title:"IsActive",dataIndex:"IsActive",key:"IsActive",render:function(e,t){return Object(l.jsx)("span",{children:t.IsActive?"Active":"In Active"})}},{title:"Action",key:"action",render:function(e,t){return Object(l.jsx)(q.b,{size:"middle",children:Object(l.jsx)("a",{children:"Edit"})})}}];return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"upload-file-standard",children:[Object(l.jsxs)("div",{className:"upload-area",children:[Object(l.jsx)(A,{className:"select-series",options:o,defaultValue:"41",onChange:function(e){c(e)}}),Object(l.jsx)(h.a,Object(f.a)(Object(f.a)({className:"select"},L),{},{maxCount:1,children:Object(l.jsx)(g.a,{icon:Object(l.jsx)(p.a,{}),children:"Select Standard File"})})),Object(l.jsx)(g.a,{className:"upload",onClick:function(){var e=y.ref("WpFile/".concat(a,"/Standard/")+b.name).put(b);k("Uploading..."),e.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(t+"% done")}),(function(e){console.log(e),k(e.message)}),(function(){y.ref("WpFile/".concat(a,"/Standard/")).child(b.name).getDownloadURL().then((function(e){k("Upload successfull.");var t=S.ref().push().key;D(t,e,b.name,!0)}))}))},children:"Upload"}),Object(l.jsx)("span",{children:N})]}),Object(l.jsx)(V.a,{columns:T,dataSource:U})]})})}),Q=function(e){var t=e.isLoggedIn;return console.log(t?"login success":"login false"),Object(l.jsx)(i.a,{children:Object(l.jsx)(o.c,{children:!0===t?Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"body",children:[Object(l.jsx)("div",{className:"menu",children:Object(l.jsx)(K,{})}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)(o.a,{exact:!0,path:"/",children:Object(l.jsx)(D,{isLoggedIn:t})}),Object(l.jsx)(o.a,{exact:!0,path:"/profile",children:Object(l.jsx)(b,{})}),Object(l.jsx)(o.a,{exact:!0,path:"/editprofile",children:Object(l.jsx)(j,{})}),Object(l.jsx)(o.a,{exact:!0,path:"/uploadfile",children:Object(l.jsx)(D,{isLoggedIn:t})}),Object(l.jsx)(o.a,{exact:!0,path:"/uploadfilestandard",children:Object(l.jsx)(J,{})})]})]})}):Object(l.jsx)("div",{className:"auth",children:Object(l.jsx)(o.a,{exact:!0,path:"/",children:Object(l.jsx)(B,{})})})})})};var X=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(r.a)(s,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){N.onAuthStateChanged((function(e){u(!!e),c(!0)}))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"header"}),a?Object(l.jsx)(Q,{isLoggedIn:o}):"Initializing....",Object(l.jsxs)("footer",{className:"footer",children:["\xa9 ",(new Date).getFullYear()," We give you dream"]})]})};s.a.render(Object(l.jsx)(X,{}),document.getElementById("root"))}},[[253,1,2]]]);
//# sourceMappingURL=main.7ef04a9c.chunk.js.map